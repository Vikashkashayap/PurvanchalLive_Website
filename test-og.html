<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OG Meta Tag Tester</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        input, button { padding: 10px; margin: 5px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007bff; color: white; cursor: pointer; }
        button:hover { background: #0056b3; }
        .result { margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 4px; }
        .preview { border: 1px solid #ddd; padding: 10px; margin: 10px 0; background: white; }
        .meta-tags { font-family: monospace; font-size: 12px; background: #f8f9fa; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ OG Meta Tag Tester for Purvanchal Live</h1>
        <p>‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡•á‡§Ç news URL ‡§î‡§∞ ‡§¶‡•á‡§ñ‡•á‡§Ç ‡§ï‡§ø social sharing ‡§ï‡•á ‡§≤‡§ø‡§è meta tags ‡§ï‡•à‡§∏‡•á ‡§¶‡§ø‡§ñ‡§§‡•á ‡§π‡•à‡§Ç</p>

        <input type="text" id="urlInput" placeholder="News URL ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (e.g., http://localhost:3000/news/your-slug)" style="width: 70%;">
        <button onclick="testMetaTags()">Test Meta Tags</button>

        <div id="result" class="result" style="display: none;">
            <h3>üìã Meta Tags Preview:</h3>
            <div id="metaPreview" class="meta-tags"></div>

            <h3>üëÄ Social Media Preview:</h3>
            <div class="preview">
                <div style="display: flex; gap: 10px;">
                    <div id="imagePreview" style="width: 200px; height: 120px; background: #eee; border-radius: 4px; display: flex; align-items: center; justify-content: center; color: #666;">
                        No Image
                    </div>
                    <div style="flex: 1;">
                        <h4 id="titlePreview" style="margin: 0; color: #007bff;">Title</h4>
                        <p id="descriptionPreview" style="margin: 5px 0; color: #666; font-size: 14px;">Description</p>
                        <small id="urlPreview" style="color: #999;">URL</small>
                    </div>
                </div>
            </div>
        </div>

        <h3>üõ†Ô∏è Local Testing Instructions:</h3>
        <ol>
            <li>‡§Ö‡§™‡§®‡§æ backend ‡§î‡§∞ frontend ‡§ö‡§≤‡§æ ‡§≤‡•á‡§Ç</li>
            <li>‡§ï‡•ã‡§à news article ‡§ñ‡•ã‡§≤‡•á‡§Ç ‡§î‡§∞ URL copy ‡§ï‡§∞‡•á‡§Ç</li>
            <li>‡§ä‡§™‡§∞ URL paste ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ "Test Meta Tags" click ‡§ï‡§∞‡•á‡§Ç</li>
            <li>Meta tags ‡§î‡§∞ preview check ‡§ï‡§∞‡•á‡§Ç</li>
            <li>‡§Ø‡§æ browser ‡§Æ‡•á‡§Ç <code>view-source:http://localhost:3000/news/your-slug</code> ‡§¶‡•á‡§ñ‡•á‡§Ç</li>
        </ol>

        <h3>üì± Real Social Media Testing:</h3>
        <ul>
            <li><strong>Facebook:</strong> <a href="https://developers.facebook.com/tools/debug/" target="_blank">Facebook Sharing Debugger</a></li>
            <li><strong>Twitter:</strong> <a href="https://cards-dev.twitter.com/validator" target="_blank">Twitter Card Validator</a></li>
            <li><strong>LinkedIn:</strong> <a href="https://www.linkedin.com/post-inspector/" target="_blank">LinkedIn Post Inspector</a></li>
        </ul>
    </div>

    <script>
        async function testMetaTags() {
            const url = document.getElementById('urlInput').value.trim();
            if (!url) {
                alert('‡§ï‡•É‡§™‡§Ø‡§æ URL ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç');
                return;
            }

            try {
                // Fetch the page
                const response = await fetch(url);
                const html = await response.text();

                // Parse meta tags
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');

                // Extract OG data
                const ogData = {
                    title: getMetaContent(doc, 'property', 'og:title') || doc.title,
                    description: getMetaContent(doc, 'property', 'og:description'),
                    image: getMetaContent(doc, 'property', 'og:image'),
                    url: getMetaContent(doc, 'property', 'og:url') || url,
                    siteName: getMetaContent(doc, 'property', 'og:site_name'),
                    type: getMetaContent(doc, 'property', 'og:type')
                };

                // Display results
                displayResults(ogData);

            } catch (error) {
                console.error('Error:', error);
                alert('Error fetching page: ' + error.message);
            }
        }

        function getMetaContent(doc, attrName, attrValue) {
            const meta = doc.querySelector(`meta[${attrName}="${attrValue}"]`);
            return meta ? meta.getAttribute('content') : null;
        }

        function displayResults(data) {
            const resultDiv = document.getElementById('result');
            const metaPreview = document.getElementById('metaPreview');

            // Build meta tags HTML
            let metaHtml = '';
            Object.entries(data).forEach(([key, value]) => {
                if (value) {
                    const prop = key === 'title' ? 'og:title' : `og:${key}`;
                    metaHtml += `<meta property="${prop}" content="${value}" />\n`;
                }
            });

            metaPreview.innerHTML = metaHtml;

            // Update preview
            document.getElementById('titlePreview').textContent = data.title || 'No Title';
            document.getElementById('descriptionPreview').textContent = data.description || 'No Description';
            document.getElementById('urlPreview').textContent = data.url || 'No URL';

            // Handle image preview
            const imageDiv = document.getElementById('imagePreview');
            if (data.image) {
                imageDiv.innerHTML = `<img src="${data.image}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 4px;" alt="Preview" />`;
            } else {
                imageDiv.innerHTML = 'No Image';
            }

            resultDiv.style.display = 'block';
        }
    </script>
</body>
</html>
